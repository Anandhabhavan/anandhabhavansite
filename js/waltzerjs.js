!function(t,n,s,o){t.fn.waltzer=function(n){var s={developerMode:!1,vertical:!1,scroll:1,offset:0,circular:!0,auto:!1,autoPause:1e3,speed:100,easing:"swing",navBtns:!0,leftNavBtn:"left-nav-btn",rightNavBtn:"right-nav-btn",pager:!1,onCreate:null,onComplete:null,onForwardComplete:null,onBackwardComplete:null};function e(n,o){this.options=t.extend({},s,o),this.coreValues(n),this.utilities(this),this.actions(this),this.init(this)}return e.prototype.coreValues=function(n){if(this.$container=n,this.$items=this.$container.children().not("."+this.options.leftNavBtn+", ."+this.options.rightNavBtn),this.options.navBtns&&(t('<div class="'+this.options.leftNavBtn+'"></div>').appendTo(this.$container),t('<div class="'+this.options.rightNavBtn+'"></div>').appendTo(this.$container),this.$buttons=this.$container.find("."+this.options.leftNavBtn+", ."+this.options.rightNavBtn)),this.itemCount=this.$items.length,this.options.vertical?(this.containerWidth=this.$container.outerHeight(!1),this.itemWidth=this.$items.outerHeight(!0),this.itemMarginWidth=this.itemWidth-this.$items.outerHeight(!1),this.containerHeight=this.containerWidth):(this.containerWidth=this.$container.outerWidth(!1),this.itemWidth=this.$items.outerWidth(!0),this.itemMarginWidth=this.itemWidth-this.$items.outerWidth(!1),this.containerHeight=this.$items.outerHeight(!1)),this.innerWrapperWidth=this.itemWidth*this.itemCount,this.innerWrapperPos=0,this.speed=this.options.scroll*this.options.speed,this.scrollWidth=this.itemWidth*this.options.scroll,this.pageCount=1,this.options.circular=!this.options.pager&&this.options.circular,this.itemCount%this.options.scroll!=0||this.containerWidth/this.itemWidth+1<this.options.scroll){for(i=this.options.scroll-1;i>=1;i--)if(this.itemCount%i==0&&this.containerWidth/this.itemWidth+1>i){this.options.scroll=i;break}}},e.prototype.utilities=function(t){this.cutAndPaste=function(t){if("forward"==t)for(i=0;i<this.options.scroll;i++)this.innerWrapper.append(this.$items[i]);else if("backward"==t)for(i=this.itemCount;i>=this.itemCount-this.options.scroll;i--)this.innerWrapper.prepend(this.$items[i])},this.refreshItemList=function(){return this.$items=this.innerWrapper.children("div.item")},this.updatePageCount=function(t,n){for(i=0,n=n==o||!1==n?1:n;i<n;i++)"forward"==t?this.pageCount<this.itemCount/this.options.scroll?this.pageCount++:this.pageCount=1:(t="backward",this.pageCount>1?this.pageCount--:this.pageCount=this.itemCount/this.options.scroll);this.options.pager&&(this.$container.find(".pager").children("span").removeClass("active"),this.$container.find(".pager").children("span[data-button ="+this.pageCount+"]").addClass("active"))},this.addAuto=function(){return!!this.options.auto&&setInterval(function(){t.move("forward")},this.options.autoPause)},this.removeAuto=function(){return!!this.options.auto&&clearInterval(t.autoScroll)},this.eventTrigger=function(n){if("string"==typeof n)t.$container.trigger(n);else for(i=0;i<n.length;i++)t.$container.trigger(n[i])},this.animateFunction=function(n,s,o){this.innerWrapper.animate(n,this.speed,this.easing,function(){t.updatePageCount(s,o),t.directionCallBack.resolve(s),t.completeCallBack.resolve("completed"),t.eventTrigger([s+"Complete","moved"])})}},e.prototype.actions=function(n){this.animate=function(n,s){if(this.innerWrapper.is(":animated"))return!1;var e={},r=!0==this.options.vertical?"top":"left",s=s==o||!1==s?1:s,a=this.scrollWidth*s;if(this.directionCallBack=t.Deferred(),this.completeCallBack=t.Deferred(),e[r]="forward"==n?"-="+a:"+="+a,this.eventTrigger(n),"forward"==n)this.innerWrapperWidth+this.innerWrapperPos[r]>this.containerWidth+this.itemWidth?this.animateFunction(e,n,s):this.options.circular?(this.cutAndPaste("forward"),this.innerWrapper.css(r,this.innerWrapperPos[r]+this.scrollWidth),this.animateFunction(e,n,s),this.refreshItemList()):this.options.circular||(e[r]=0,this.animateFunction(e,n,s));else if("backward"==n){if(this.innerWrapperPos[r]<0)this.animateFunction(e,n,s);else if(this.options.circular)this.cutAndPaste("backward"),this.innerWrapper.css(r,this.innerWrapperPos[r]-this.scrollWidth),this.animateFunction(e,n,s),this.refreshItemList();else if(!this.options.circular){if(this.scrollWidth<this.containerWidth){for(var h=this.containerWidth;h>0;)h-=this.itemWidth;e[r]=-((this.innerWrapperWidth-this.containerWidth+h)*1)}else e[r]=-((this.innerWrapperWidth-this.scrollWidth)*1);this.animateFunction(e,n,s)}}this.initCallBacks(this.directionCallBack,this.completeCallBack)},this.initCallBacks=function(t,s){(n.options.onForwardComplete||n.options.onBackwardComplete)&&t.done(function(t){"forward"==t?"function"==typeof n.options.onForwardComplete&&n.options.onForwardComplete.call(n):"backward"==t&&"function"==typeof n.options.onBackwardComplete&&n.options.onBackwardComplete.call(n)}),"function"==typeof n.options.onComplete&&s.done(function(t){n.options.onComplete.call(n)})}},e.prototype.init=function(n){if(this.options.vertical?this.$items.wrapAll('<div class="innerWrapper" style="position:relative; height:'+this.innerWrapperWidth+'px;"></div>'):this.$items.wrapAll('<div class="innerWrapper" style="position:relative; width:'+this.innerWrapperWidth+'px;"></div>'),this.innerWrapper=this.$container.children("div.innerWrapper"),this.innerWrapper.wrap('<div class="mask" style="position:relative; overflow:hidden; width:100%; height:'+this.containerHeight+'px;"></div>'),0!=this.options.offset){for(i=0;i<this.options.offset;i++)this.innerWrapper.append(this.$items[i]);this.refreshItemList()}if(this.options.onCreate&&"function"==typeof this.options.onCreate&&this.options.onCreate.call(this),this.options.pager){this.$container.append('<div class="pager"></div>');var s=this.itemCount/this.options.scroll;for(i=0;i<s;i++){var o=this.pageCount==i+1?"active":"";this.$container.find(".pager").append('<span class="'+o+'" data-button="'+(i+1)+'"><span>'+(i+1)+"</span></span>")}this.$container.on("click",".pager > span",function(){var s=n.pageCount,o=t(this).attr("data-button");(s<o||s>o)&&(s<o?n.move("forward",o-s):n.move("backward",-((o-s)*1)))})}this.options.auto&&(this.autoScroll=this.addAuto()),this.options.developerMode&&console.log(this),this.options.navBtns&&this.$buttons.on("click",function(){t(this).attr("class")==n.options.leftNavBtn?n.move("backward"):t(this).attr("class")==n.options.rightNavBtn&&n.move("forward")}),this.options.auto&&this.$container.on({mouseover:function(){return n.removeAuto()},mouseout:function(){return n.autoScroll=n.addAuto()}})},e.prototype.destroy=function(t){this.$container.find(".mask").after(this.$items).remove(),this.options.navBtns&&this.$buttons.off()},e.prototype.move=function(t,n){this.innerWrapperPos=this.innerWrapper.position(),this.animate(t,n)},this.each(function(){"string"==typeof n?($this=t(this).data("plugin_waltzerJS"),"forward"==n||"backward"==n?$this.move.call($this,n):"stop"==n?$this.removeAuto():"start"==n?$this.autoScroll=$this.addAuto():"destroy"==n&&$this[n].call($this)):t.data(t(this),"plugin_waltzerJS")||t(this).data("plugin_waltzerJS",new e(t(this),n))}),this}}(jQuery,window,document);