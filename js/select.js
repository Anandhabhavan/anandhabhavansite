!function(t,s,e,i){var a=function(s,e){this.element=s,this.defaults={index:0,activeClass:"item-active",disabledClass:"select-disabled",itemDisabledClass:"item-disabled",openClass:"select-open",gutter:2,initCallback:function(){},selectClick:function(){},itemClick:function(){},data:[{name:"select",value:"",disabled:!1}]},this.pos={x:0,y:0},this.sid="",this.opts=t.extend({},this.defaults,e)};a.prototype={init:function(){this.checkData(),this.setSelected(this.opts.index),this.bind("init");var t=this.opts.initCallback;return"function"==typeof t&&t.call(this),this},checkData:function(){var t=this;return t.opts.data.length>0||(t.opts.data=[{name:"select",value:"",disabled:!1}],!1)},update:function(t){var s=this;return s.opts.data=t,s.destroy(),s.opts.index=0,s.setSelected(s.opts.index),s},bind:function(i){var a=this,l=a.element;"init"===i?(l.on("click",function(s){if(s.stopPropagation(),!t(this).hasClass(a.opts.disabledClass)){t(this).hasClass(a.opts.openClass)?(t(this).removeClass(a.opts.openClass),a.destroy()):(t(this).addClass(a.opts.openClass),a.render());var e=a.opts.selectClick;"function"==typeof e&&e.call(this)}}),t(s).resize(function(){a.destroy()}),t(e).click(function(){a.destroy()})):"render"===i&&t("#"+a.sid).on("click",function(s){var e=t(s.target),i=t(this).find(".select-options .select-option-item");if(e.hasClass("select-option-item")&&!e.hasClass(a.opts.itemDisabledClass)){var l=i.index(e),o=a.opts.itemClick;a.opts.index=l,a.setSelected(l),i.removeClass(a.opts.activeClass),e.addClass(a.opts.activeClass),"function"==typeof o&&o.call(this,l,e)}})},render:function(){var s=this;s.sid="select_"+new Date().getTime();var e="";if(e+='<div class="select-wrapper" id="'+s.sid+'"><div class="select-content"><ul class="select-options">',s.checkData())for(var i=s.opts.data,a=0;a<i.length;a++)i[a].disabled?e+='<li class="select-option-item '+s.opts.itemDisabledClass+'" data-value="'+i[a].value+'">'+i[a].name+"</li>":s.opts.index===a?e+='<li class="select-option-item '+s.opts.activeClass+'" data-value="'+i[a].value+'">'+i[a].name+"</li>":e+='<li class="select-option-item" data-value="'+i[a].value+'">'+i[a].name+"</li>";else e+='<li class="select-option-item" data-value=""></li>';e+="</ul></div></div>",t("body").append(e),s.setPosition(),s.bind("render")},setSelected:function(t){var s=this,e=parseInt(t),i=s.element,a=i.find(".select-inner"),l=i.find('input[type="hidden"]'),o=s.opts.data[0];return e>=0&&e<s.opts.data.length?o=s.opts.data[e]:-1===e&&(o={name:"select",value:""}),s.opts.index=e,a.text(o.name),l.val(o.value),s},setPosition:function(){var e=this,i=e.element,a=t("#"+e.sid),l=e.opts.gutter,o={w:t(i).outerWidth(!0),h:t(i).outerHeight(!0)},n={x:t(i).offset().left,y:t(i).offset().top},d={w:a.outerWidth(!0),h:a.outerHeight(!0)},c={t:n.y-t(s).scrollTop(),r:t(s).width()-(n.x-t(s).scrollLeft()),b:t(s).height()-(n.y-t(s).scrollTop())-o.h,l:n.x-t(s).scrollLeft()};c.r<d.w?c.l<d.w?e.pos.x=n.x:e.pos.x=o.w+n.x-d.w:e.pos.x=n.x,c.b<d.h?c.t<d.h?e.pos.y=o.h+n.y+l:e.pos.y=n.y-d.h-l:e.pos.y=o.h+n.y+l,a.css({width:o.w,left:e.pos.x+"px",top:e.pos.y+"px"})},disabled:function(s){var e=t(this.element);return void 0===s?e.hasClass(this.opts.disabledClass)?(this.destroy(),e.removeClass(this.opts.disabledClass)):e.addClass(this.opts.disabledClass):s?e.addClass(this.opts.disabledClass):(this.destroy(),e.removeClass(this.opts.disabledClass)),this},destroy:function(){var s=t("#"+this.sid);return s.length>0&&s.remove(),t(this.element).removeClass(this.opts.openClass),s.unbind(),this},getValue:function(){return this.opts.data[this.opts.index].value},getName:function(){return this.opts.data[this.opts.index].name}},t.fn.select=function(t){return new a(this,t).init()}}(jQuery,window,document);